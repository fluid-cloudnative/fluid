# 什么是Fluid？

## 为什么需要Fluid

在云上通过云原生架构运行AI、大数据等任务，可以享受计算资源弹性的优势，但同时也会遇到，计算和存储分离架构带来的数据访问延迟和远程拉取数据带宽开销大的挑战。尤其在GPU深度学习训练场景中，迭代式的远程读取大量训练数据方法会严重拖慢GPU计算效率。

另一方面，Kubernetes只提供了异构存储服务接入和管理标准接口(CSI，Container Storage Interface),对应用如何在容器集群中使用和管理数据并没有定义。在运行训练任务时，数据科学家需要能够定义数据集的文件特征,管理数据集版本，控制访问权限，数据集预处理，加速异构数据读取等。但是在Kubernetes中还没有这样的标准方案，这是云原生容器社区缺失的重要能力之一。


## 什么是Fluid

不同于传统PVC面向存储的抽象，Fluid对Kubernetes上”计算任务使用数据的过程”进行抽象，提出弹性数据集Dataset概念，并作为“first class citizen”在Kubernetes中实现，来实现Dataset管理（CRUD操作）、权限控制和访问加速等能力。Fluid一方面负责分布式缓存系统（Alluxio，JuiceFS）转换成自我管理、弹性扩容、自我修复，可观测的缓存服务，并通过其支持数据集的操作；另一方面，Fluid通过数据缓存的位置信息，为使用数据集的应用提供数据亲和性调度。


## Fluid核心功能：

1. **面向应用的数据集统一抽象**：

数据集抽象可以支持来自不同的存储源的数据聚合。在 Kubernetes 集群中，还可以指定数据集的可迁移性，例如在使用 GPU 运算时，可以将数据缓存到 GPU 节点。当计算结束后，我们可以通过修改亲和性将数据缓存到便宜的 CPU 节点上，以节省成本。同时也支持可描述的数据特征，为底层Runtime优化数据访问策略提供一些应用层的信息，比如某些Runtime就会根据文件特征是小文件，将数据缓存保存到rocksdb而不是磁盘上。

同时数据集提供了可观测性，比如该数据集的数据总量多少，目前提供的缓存空间是多大，缓存命中率是多少。用户可以根据这些信息决定是否需要对缓存系统进行扩缩容。

2. **可扩展的数据引擎插件**：

Dataset是个统一的抽象概念;对于数据真正的操作，实际上由具体的Runtime实现；由于不同存储的差异，就会有不同的Runtime接口。如何真正访问数据就需要引入Runtime，Fluid中的Runtime分为两大类，一类是CacheRuntime实现缓存加速,包括开源的分布式缓存AlluxioRuntime主要加速S3，HDFS，JuiceFSRuntime加速JuiceFS；另一类是ThinRuntime统一访问接口，比如CubeFS，CurveFS是新开源和维护的分布式存储系统。

Fluid的通用data operation描述数据的预热，弹性伸缩，缓存清理，元数据备份，恢复等操作。

3. **自动化的数据操作**：

以CRD的方式提供数据预热，数据迁移，数据备份等多种操作，并且支持一次性，定时和事件驱动等多种模式，方便用户与


4. **通用数据加速**：

将数据分布式缓存技术与自动弹性(Autoscaling)，可迁移(Portability)，可观测(Observability)，亲和性调度（Scheduling）能力相结合，通过提供可以观测，弹性扩缩容的缓存能力以及数据亲和性调度能力提升数据的访问性能。


5. **运行时平台无关**：





而Fluid对于数据场景的支持，也分为3个阶段，1.可达可通 2.加速访问 3.容器集群中工作负载和数据之间的协同编排，以及多个数据集的管理

